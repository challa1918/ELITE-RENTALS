<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Property</title>
    <link href="css\nav.css" rel="stylesheet">
    <link rel= "stylesheet" href="css\footer.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
  <link rel="stylesheet" href="css\carousel.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <link rel="stylesheet" href="css\progressiveform.css">
  <link rel="stylesheet" href="css\postproperty.css">
  <script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-storage.js"></script>
  
  
 
</head>
<body>

  <script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.23.0/firebase-auth.js"></script>
  <script>

var firebaseConfig = {
  apiKey: "AIzaSyCyVppKuVBIHgpTCEJsC6fql2j24Q9ykVc",
  authDomain: "rental-management-e12bf.firebaseapp.com",
  projectId: "rental-management-e12bf",
  storageBucket: "rental-management-e12bf.appspot.com",
  messagingSenderId: "772716264622",
  appId: "1:772716264622:web:192dc75f005fcf956c013f",
  measurementId: "G-11WGRKX5VQ"
};
          
          firebase.initializeApp(firebaseConfig);
          firebase.analytics();
          var db=firebase.firestore();
          console.log(db);
         
         
        
            firebase.auth().onAuthStateChanged(function(user) {
              if (user) {
              // User is signed in

              db.collection("users").doc(user.email).get().then(function(doc){

                document.getElementById("name").value=doc.data().name;
                document.getElementById("email").value=doc.data().email;
                document.getElementById("phone").value=doc.data().phnno;
                console.log(JSON.stringify(doc.data()));
                

              });
             
              } else {
              // No user is signed in.
              console.log("No Logged in User ");
              
              window.location.href="login.html";

              }
              });
              
            function logout(){
            firebase.auth().signOut().then(function(){
              sessionStorage.clear();
            alert("Logged out scuccessfully.... Redirecting   ------>");
            });
            }
        
         
   </script>

    <header>
        <div class="menu-bar">
        
                     
            <ul>
              <li style="margin-left:-7em; padding-right: 70px;"> <a href="home.html"><b><span>ELITE</span>RENTALS</B></a></li>
              <li><b><a  href="home.html">HOME</a></b></li>
              <li "><b><a  href="#">RENTALS&nbsp&nbsp<big><i style="font-size: 10px;" class="fas fa-chevron-down"></i></big> </a></b>  
                        
              <div class="drop-down ">
                  <ul>
                    
                    <li ><b><a style="margin-left: 40px;"  href="residential.html">RESIDENTIAL</a></b></li>
                    <li><b><a style="margin-left: 40px; " href="commercial.html">COMMERCIAL</a></b></li>
                  
                  </div>
              </li>
  
          
               <li><b><a style="color:rgb(55, 218, 55);"  href="postproperty.html">POST A PROPERTY</a></b></li>
      
                <li><b><a href="Movepack.html">MOVING AND PACKING</a></b></li>
            
                <li><b><a href="#footer">CONTACT US</a></b>
               
                   </li>
                  </li>
                  
                  <li><b><a href="javascript:logout();">LOGOUT</a></b></li>
                  <div class="user" style="margin-top: 20px;" id="uname">
                    User name
                  </div>
                  <div class="uimg" style="margin-top:20px;"><i class="fas fa-user"></i>
                  </div>  
      
              </ul>
         
            </div>        

            
      
    </header>
    <script>
      console.log("Logged in User "+sessionStorage.getItem("username"));
      document.getElementById("uname").firstChild.nodeValue=sessionStorage.getItem("username");  
   </script>
   
    <div class="container">
        
        <form id="sign-form" class="sign-form">
          <ol class="questions">
            <li>
              <span><label for="name">Hi, What is your Name?</label></span>
              <input class="active" id="name" name="name" type="text" value="Full name" disabled autofocus />
            </li>
          
            <li>
              <span><label for="email">Enter you email</label></span>
              <input id="email" name="email" type="text" placeholder="Email" disabled  autofocus />
            </li>
            
            <li>
              <span><label for="phone">Enter your phone number</label></span>          
            
              <input id="phone" name="phone" placeholder="Phone number" type="text" disabled  autofocus />
            </li>
            
            <li>
              <span><label for="cityup">Select City</label></span>  
              <select name="city" id="city" style="width: 360px; margin-left: 0em; padding: 10px;" autofocus>
                <option value="City" selected disabled>Type</option>
                <option value="Hyderabad">Hyderabad</option>
                <option value="Vijayawada">Vijayawada</option>
                <option value="Secunderabad">Secunderabad</option>
                <option value="Shadnagar">Shadnagar</option>
                <option value="Mumbai">Mumbai</option>
                <option value="Chennai">Chennai</option>
              </select>           
                
            </li>

            <li>
              <span><label for="address">Enter property address</label></span>
              <input id="address" name="addresss" type="text" placeholder="Addresss" autofocus />
            </li>





            <li>
              <span><label for="property">Enter the property details</label></span>  
              <select  name="ptype" id="ptype" style="width: 160px; margin-left: 0em; padding: 10px;" autofocus>
                <option value="type" selected disabled>Type</option>
                <option value="Residential"> Residential</option>
                <option value="Commercial">Commercial</option>
            
              </select> 


              <select class="custom-select" style="display: none; width: 200px; margin-left: 0em; padding: 10px;"  id="pcommercialselector">
                <option selected disabled>Commercial Type</option>
                <option value="Show Room">Show Room</option>
                <option value="Office Space">Office Space</option>
                <option value="Shop">Shop</option>
                <option value="Hostel">Hostel</option>                             
              </select>

              <select class="custom-select"  style=" display: none; width: 160px; margin-left: 0em; padding: 10px;" id="pfhselector">
                <option selected disabled>Residential Type</option>
              <option value="Flat">Flat</option>
              <option value="House">House</option>                                 
            </select>
          
          
           
            <select class="custom-select" style=" display:none; width: 160px; margin-left: 0em; padding: 10px;" id="pbhkselector">
              <option selected disabled>BHK Type</option>
              <option value="BHK">BHK</option>
              <option value="BHK2">BHK2</option>
              <option value="BHK3">BHK3</option>
              <option value="BHK4">BHK4</option>
              <option value="BHK5">BHK5</option>
              </select>                                           
                        
                
            </li>
            <li>
              <span><label for="location">Upload Location!!</label></span>

              <a id="hh" href="http://googlemaps.com" target="_blank" rel="noopener noreferrer">Upload</a>
              <a id="hh" href="" target="_blank" rel="noopener noreferrer">Help</a>  
              <input type="text" id="location" value=""  name="loc" >
                         
            </li>
            <li>
              <span><label for="images">Select Image Of Property</label></span>
              <input type="file" id="images" value=""  name="img">
            </li>
            <li>
              <p style="margin-top: 45px;font-size: 32pt;float:right">
                <a name="ss" href="#" style=" color:rgb(34, 216, 34);text-decoration:none" id="signup">Confirm Details</a></p>
            </li>
   
          </ol>
         <div class="error-message"></div>
   
        </form>
        <div class="navigation">
          
          <ol>
      
            <li><a href="#" data-ref="name">Name</a></li>
            <li><a href="#" data-ref="email">Email</a></li>
            <li><a href="#" data-ref="phone">Phone</a></li>
            <li><a href="#" data-ref="city">City</a></li>
            <li><a href="#" data-ref="address">Address</a></li>
            <li><a href="#" data-ref="pcommercialselector">PType</a></li>
            <li><a href="#" data-ref="images">Image</a></li>
          </ol>
        </div>
        <h1 id="wf" style="font-family: new times roman; opacity:0;width: 600px; margin-top:1.1em;display:none; margin-bottom:1em">Posted Successfully!!</h1>
        <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
       
       <lottie-player id="lot" style="display: none; text-align: center; margin-top: -100px;" src="https://assets3.lottiefiles.com/datafiles/kOKlmFadtJ1BnUv/data.json"  background="transparent"  speed="1"  style="width: 150px; height: 150px;"   autoplay></lottie-player> 
        

        
        <script src="javascript\prog.js"></script>
        <script> 
        document.getElementById("signup").addEventListener("click",function(){
          var city = document.getElementById('city').value;
          var propertytype=document.getElementById("ptype").value;
          var restype = document.getElementById('pfhselector').value;
           var resbhktype = document.getElementById('pbhkselector').value;
           var comtype = document.getElementById('pcommercialselector').value;
           var s=document.getElementById("location").value;
           var r=s.split("\"");
           console.log(r);
        console.log(r[1]);
          data={
          "owner":document.getElementById("name").value,
          "email":document.getElementById("email").value,
          "phnno":document.getElementById("phone").value,
          "city":document.getElementById("city").value,
          "address":document.getElementById("address").value,
          "propertytype":propertytype,
          "location":r[1]
        };




   
   if(propertytype=="Residential"){
  
        data["residentialtype"]=restype;
        data["residentialbhktype"]=resbhktype;
   }
   else{
     
    data["Commercialtype"]=comtype;
   }  ;
   
   console.log(data);

  db.collection("PostId").doc("Id").get().then(function(doc){
        id=doc.data().id;
        
      
        var storageRef = firebase.storage().ref().child(id.toString());
       console.log("Storage "+storageRef);




       var file = document.querySelector("#images").files;
            const metadata={

contentType:file.type
};
            for (i=0;i<file.length;i++){
                storageRef.child(file[i].name).put(file[i],metadata).then(function(){
                   console.log("image index :"+i); 
                  
               
                }).catch(function(err){
                    alert("failed "+err);
                });


            }
        db.collection("Property Data").doc(city).collection(city+" rental properties").doc(id.toString()).set(data).then(function(){
 
           return true;
          }).catch(function(err){
            alert(err);
           
               return false;
          });

          a=doc.data().id+1;

              db.collection("PostId").doc("Id").set({"id":a}).catch(function(err){
                  alert(err);
              });
  });
        




       });
       
       </script>
    </div>
    <div class="note">
      <p><b>Note:</b><br> <b> ></b> Click enter after entering data.<br><b> ></b> Basic data like name, email,phone number are pre-filled cant be edited.</p>

    </div>
           
    <footer id="footer" style="margin-top:-30px">
      <div class="row">
     <div class="column">
      <h3 style="color: white;">Elite Rentals</h3>
      <br>
       <a href="#">Dilshukhnagar</a><br>
       <a href="#">Hyderabad,</a><br>
       <a href="#">India.</a><br>
       <a href="#">Phone:+91 9999999999</a><br>
       <a href="#">Email:Rentals@gmail.com</a><br>
    </div>
     <div class="column">
         <h3 style="color: white;">Useful Links</h3>
         <br>
         <i style="color: white;" class="bx bx-chevron-right"></i><a href="#">Home</a><br>
         <i class="bx bx-chevron-right"></i><a href="#"> Rentals</a><br>
         <i class="bx bx-chevron-right"></i> <a href="#"> About</a><br>
     </div>
    
  </footer>
  



</body>
</html>